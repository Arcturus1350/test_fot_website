<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VPS回馈用户抽奖活动</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/lottery.css">
    <link rel="stylesheet" href="css/card-animation.css">
    <link rel="stylesheet" href="css/transition-animation.css">
</head>
<body>
    <div class="main-container">
        <!-- 头部信息 -->
        <header class="header">
            <div class="header-content">
                <h1 class="title">VPS回馈用户抽奖活动</h1>
                <div class="activity-time">活动时间：2025.7.25 - 2025.8.8</div>
                <div class="user-status">
                    <span class="member-status">VPS大会员</span>
                    <div class="user-resources">
                        <span class="draw-tickets">
                            抽奖次数: <span id="drawTickets">10</span>
                            <button class="resource-add-btn" id="addTicketsBtn" title="兑换抽奖次数">+</button>
                        </span>
                        <span class="v-beans">
                            V豆: <span id="vBeans">100</span>
                            <button class="resource-add-btn" id="addVBeansBtn" title="充值V豆">+</button>
                        </span>
                    </div>
                </div>
            </div>
        </header>

        <!-- 主内容区域 -->
        <main class="main-content">
            <!-- 抽奖区域 -->
            <section class="lottery-section">
                <div class="lottery-container">
                    <!-- 预留空间区域 -->
                    <div class="lottery-placeholder">
                        <!-- 此区域预留给未来功能 -->
                    </div>

                    <div class="lottery-actions">
                        <div class="pity-counter">
                            <span>距离保底: <span id="pityCounter">70</span>次</span>
                        </div>
                        
                        <div class="draw-buttons">
                            <button id="singleDraw" class="draw-btn single">
                                <span class="btn-text">单抽</span>
                                <span class="btn-cost">消耗: 1次</span>
                            </button>
                            <button id="tenDraw" class="draw-btn ten">
                                <span class="btn-text">十连抽</span>
                                <span class="btn-cost" id="tenDrawCost">消耗: 10次</span>
                            </button>
                        </div>
                    </div>
                </div>
            </section>

            <!-- 功能区域 -->
            <section class="functions-section">
                <div class="function-tabs">
                    <button class="tab-btn active" data-tab="exchange">V豆兑换</button>
                    <button class="tab-btn" data-tab="history">抽奖历史</button>
                    <button class="tab-btn" data-tab="rules">活动规则</button>
                    <button class="tab-btn" data-tab="share">分享活动</button>
                </div>

                <div class="tab-content">
                    <!-- V豆兑换页面 -->
                    <div id="exchange" class="tab-panel active">
                        <h3>V豆兑换商店</h3>
                        <div class="exchange-store">
                            <!-- 抽奖次数兑换 -->
                            <div class="exchange-category">
                                <h4 class="category-title">
                                    <span class="category-icon">🎫</span>
                                    抽奖次数
                                </h4>
                                <div class="exchange-items">
                                    <div class="exchange-item" data-type="draw-ticket" data-cost="180" data-reward="1">
                                        <div class="item-image">
                                            <div class="item-icon">🎫</div>
                                            <div class="item-glow"></div>
                                        </div>
                                        <div class="item-info">
                                            <div class="item-name">抽奖券</div>
                                            <div class="item-description">单次抽奖机会</div>
                                            <div class="item-cost">
                                                <span class="cost-amount">180</span>
                                                <span class="cost-currency">V豆</span>
                                            </div>
                                        </div>
                                        <button class="item-select-btn">选择</button>
                                    </div>
                                    
                                    <div class="exchange-item" data-type="draw-ticket" data-cost="900" data-reward="5">
                                        <div class="item-image">
                                            <div class="item-icon">🎫</div>
                                            <div class="item-badge">5张</div>
                                            <div class="item-glow"></div>
                                        </div>
                                        <div class="item-info">
                                            <div class="item-name">抽奖券包</div>
                                            <div class="item-description">5次抽奖机会</div>
                                            <div class="item-cost">
                                                <span class="cost-amount">900</span>
                                                <span class="cost-currency">V豆</span>
                                            </div>
                                        </div>
                                        <button class="item-select-btn">选择</button>
                                    </div>
                                    
                                    <div class="exchange-item" data-type="draw-ticket" data-cost="1800" data-reward="10">
                                        <div class="item-image">
                                            <div class="item-icon">🎫</div>
                                            <div class="item-badge">10张</div>
                                            <div class="item-glow"></div>
                                        </div>
                                        <div class="item-info">
                                            <div class="item-name">抽奖券礼包</div>
                                            <div class="item-description">10次抽奖机会</div>
                                            <div class="item-cost">
                                                <span class="cost-amount">1800</span>
                                                <span class="cost-currency">V豆</span>
                                            </div>
                                        </div>
                                        <button class="item-select-btn">选择</button>
                                    </div>
                                </div>
                            </div>

                            <!-- 会员卡领取 -->
                            <div class="exchange-category">
                                <h4 class="category-title">
                                    <span class="category-icon">🏆</span>
                                    会员卡领取
                                </h4>
                                <div id="goldPrizeItems" class="exchange-items">
                                    <!-- 会员卡将通过JavaScript动态添加 -->
                                </div>
                                <div id="noGoldPrizes" class="no-prizes" style="display: none;">
                                    <p>暂无未领取的会员卡</p>
                                    <p>快去抽奖获得VPS会员吧！</p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- 抽奖历史 -->
                    <div id="history" class="tab-panel">
                        <h3>抽奖历史</h3>
                        <div class="history-container">
                            <div class="history-stats">
                                <div class="stat-item">
                                    <span class="stat-label">总抽奖次数：</span>
                                    <span id="totalDrawCount" class="stat-value">0</span>
                                </div>
                                <div class="stat-item">
                                    <span class="stat-label">金色品质：</span>
                                    <span id="goldCount" class="stat-value">0</span>
                                </div>
                            </div>
                            
                            <div id="historyGrid" class="history-grid">
                                <!-- 历史记录将通过JavaScript动态添加 -->
                            </div>
                            
                            <div id="historyPagination" class="history-pagination">
                                <button id="prevPage" class="page-btn" disabled>上一页</button>
                                <span id="pageInfo" class="page-info">第 1 页，共 1 页</span>
                                <button id="nextPage" class="page-btn" disabled>下一页</button>
                            </div>
                            
                            <div id="emptyHistory" class="empty-history" style="display: none;">
                                <p>暂无抽奖记录</p>
                                <p>快去抽奖获得精美奖品吧！</p>
                            </div>
                        </div>
                    </div>

                    <!-- 活动规则 -->
                    <div id="rules" class="tab-panel">
                        <h3>活动规则</h3>
                        <div class="rules-content">
                            <h4>奖品说明</h4>
                            <ul>
                                <li><span class="quality gold">金色品质</span>：VPS月卡、年卡（基础概率1.5%，含保底2.36%）</li>
                                <li><span class="quality purple">紫色品质</span>：现金红包5元、10元（概率8.5%）</li>
                                <li><span class="quality blue">蓝色品质</span>：50-199 V豆（概率40%）</li>
                                <li><span class="quality green">绿色品质</span>：1-49 V豆（概率50%）</li>
                            </ul>
                            
                            <h4>特殊规则</h4>
                            <ul>
                                <li>首次十连抽只需7次抽奖机会</li>
                                <li>前30次抽奖保底一个金色品质奖励</li>
                                <li>连续70次未获得金色品质，第70次必出</li>
                                <li>金色品质月卡年卡交替获得</li>
                                <li>100 V豆可兑换1次抽奖机会</li>
                            </ul>
                        </div>
                    </div>

                    <!-- 分享活动 -->
                    <div id="share" class="tab-panel">
                        <h3>分享活动</h3>
                        <div class="share-content">
                            <p>分享给好友，一起参与抽奖活动！</p>
                            <div class="share-actions">
                                <button id="shareLink">复制链接</button>
                                <button id="shareQR">生成二维码</button>
                            </div>
                            <div id="qrcode" class="qr-container" style="display: none;"></div>
                            
                            <!-- 开发者工具区域 -->
                            <div class="dev-tools" style="margin-top: 40px; padding-top: 20px; border-top: 1px solid rgba(255,255,255,0.2);">
                                <h4 style="color: #a8d0ff; margin-bottom: 15px; font-size: 1em;">开发者工具</h4>
                                <div class="dev-actions">
                                    <button id="clearDataBtn" class="dev-btn clear">清除数据(测试)</button>
                                </div>
                                <p style="font-size: 0.8em; color: rgba(255,255,255,0.6); margin-top: 10px;">
                                    测试功能：生成二维码可获得10000V豆
                                </p>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
        </main>
    </div>

    <!-- 抽奖结果弹窗 -->
    <div id="resultModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>抽奖结果</h3>
                <button class="close-btn">&times;</button>
            </div>
            <div class="modal-body">
                <div id="resultDisplay" class="result-display">
                    <!-- 抽奖结果将在这里显示 -->
                </div>
            </div>

        </div>
    </div>

    <!-- 兑换确认弹窗 -->
    <div id="exchangeModal" class="modal">
        <div class="modal-content exchange-modal-content">
            <div class="modal-header">
                <h3>兑换确认</h3>
                <button class="close-btn">&times;</button>
            </div>
            <div class="modal-body">
                <div class="exchange-confirm">
                    <div class="selected-item">
                        <div class="selected-item-image">
                            <div id="selectedItemIcon" class="selected-icon">🎫</div>
                        </div>
                        <div class="selected-item-info">
                            <div id="selectedItemName" class="selected-name">抽奖券</div>
                            <div id="selectedItemDescription" class="selected-description">单次抽奖机会</div>
                            <div id="selectedItemCost" class="selected-cost">
                                <span class="unit-cost">180 V豆/个</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="exchange-input-section">
                        <div class="input-group">
                            <label for="exchangeQuantity">兑换数量：</label>
                            <div class="quantity-controls">
                                <button id="decreaseBtn" class="quantity-btn">-</button>
                                <input type="number" id="exchangeQuantity" value="1" min="1" max="999">
                                <button id="increaseBtn" class="quantity-btn">+</button>
                            </div>
                        </div>
                        
                        <div class="exchange-summary">
                            <div class="summary-item">
                                <span class="summary-label">兑换数量：</span>
                                <span id="summaryQuantity" class="summary-value">1个</span>
                            </div>
                            <div class="summary-item">
                                <span class="summary-label">所需V豆：</span>
                                <span id="summaryTotalCost" class="summary-value">100</span>
                            </div>
                            <div class="summary-item">
                                <span class="summary-label">剩余V豆：</span>
                                <span id="summaryRemainingVBeans" class="summary-value">0</span>
                            </div>
                        </div>
                        
                        <div class="user-resources">
                            <div class="current-vbeans">
                                <span class="resource-label">当前V豆：</span>
                                <span id="currentVBeans" class="resource-value">100</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button id="cancelExchange" class="cancel-btn">取消</button>
                <button id="confirmExchange" class="confirm-btn">确认兑换</button>
            </div>
        </div>
    </div>

    <!-- CDK领取弹窗 -->
    <div id="cdkModal" class="modal">
        <div class="modal-content cdk-modal-content">
            <div class="modal-header">
                <h3>奖品CDK</h3>
                <button class="close-btn">&times;</button>
            </div>
            <div class="modal-body">
                <div class="cdk-content">
                    <div class="cdk-prize-info">
                        <div id="cdkPrizeIcon" class="cdk-prize-icon">👑</div>
                        <div id="cdkPrizeName" class="cdk-prize-name">VPS月卡</div>
                        <div class="cdk-prize-desc">请保存以下CDK码，用于兑换奖品</div>
                    </div>
                    
                    <div class="cdk-code-section">
                        <label for="cdkCode">CDK兑换码：</label>
                        <div class="cdk-code-display">
                            <input type="text" id="cdkCode" value="Q7S6HMGVJNN9WFQFMULU" readonly>
                            <button id="copyCdkBtn" class="copy-cdk-btn">复制</button>
                        </div>
                    </div>
                    
                    <div class="cdk-instructions">
                        <h4>使用说明：</h4>
                        <ul>
                            <li>请妥善保存CDK兑换码</li>
                            <li>前往VPS官网会员中心使用</li>
                            <li>CDK码仅可使用一次</li>
                            <li>如有问题请联系客服</li>
                        </ul>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button id="closeCdkModal" class="cancel-btn">关闭</button>
                <button id="confirmCdkReceived" class="confirm-btn">确定</button>
            </div>
        </div>
    </div>

    <!-- V豆充值弹窗 -->
    <div id="rechargeModal" class="modal">
        <div class="modal-content recharge-modal-content">
            <div class="modal-header">
                <h3>V豆充值</h3>
                <button class="close-btn">&times;</button>
            </div>
            <div class="modal-body">
                <div class="recharge-content">

                    
                    <div class="recharge-options">
                        <div class="recharge-option tier-1" data-amount="60" data-price="6" data-tier="1">
                            <div class="option-amount">60 V豆</div>
                            <div class="option-price">¥6</div>
                            <div class="first-charge-indicator">首充双倍 +60</div>
                        </div>
                        <div class="recharge-option tier-2" data-amount="300" data-price="30" data-tier="2">
                            <div class="option-amount">300 V豆</div>
                            <div class="option-price">¥30</div>
                            <div class="first-charge-indicator">首充双倍 +300</div>
                        </div>
                        <div class="recharge-option tier-3" data-amount="980" data-price="98" data-tier="3">
                            <div class="option-amount">980 V豆</div>
                            <div class="option-price">¥98</div>
                            <div class="first-charge-indicator">首充双倍 +980</div>
                        </div>
                        <div class="recharge-option tier-4" data-amount="1980" data-price="198" data-tier="4">
                            <div class="option-amount">1980 V豆</div>
                            <div class="option-price">¥198</div>
                            <div class="first-charge-indicator">首充双倍 +1980</div>
                        </div>
                        <div class="recharge-option tier-5" data-amount="3280" data-price="328" data-tier="5">
                            <div class="option-amount">3280 V豆</div>
                            <div class="option-price">¥328</div>
                            <div class="first-charge-indicator">首充双倍 +3280</div>
                        </div>
                        <div class="recharge-option tier-6" data-amount="6480" data-price="648" data-tier="6">
                            <div class="option-amount">6480 V豆</div>
                            <div class="option-price">¥648</div>
                            <div class="first-charge-indicator">首充双倍 +6480</div>
                        </div>
                    </div>
                    
                    <div class="current-balance">
                        <span class="balance-label">当前V豆：</span>
                        <span id="currentBalance" class="balance-value">100</span>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button id="cancelRecharge" class="cancel-btn">取消</button>
                <button id="confirmRecharge" class="confirm-btn" disabled>确认充值</button>
            </div>
        </div>
    </div>

    <script src="js/utils.js"></script>
    <script src="js/prize.js"></script>
    <script src="js/lottery.js"></script>
    <script src="js/transition-animation.js"></script>
    <script src="js/card-animation.js"></script>
    <script src="js/app.js"></script>
</body>
</html> 